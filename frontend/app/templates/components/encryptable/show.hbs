{{#if this.isEncryptableEditing}}
  <Encryptable::Form @encryptable={{@encryptable}} @title={{t "encryptable/credentials.edit.title"}} @onAbort={{this.toggleEncryptableEdit}}/>
{{/if}}
{{#if this.isFileCreating}}
  <EncryptableFile::Form @class="modal_file_entry" @encryptableCredential={{@encryptable}} @title={{t "encryptable_files.new.title"}} @onAbort={{this.toggleFileNew}}/>
{{/if}}
{{#if this.isFile}}
  <div class="container px-5 pt-4 h-100 bg-white pl-none encryptable-container-smartphone mb-15">
    <div class="row mb-3">
      <div class="col">
        <a id="encryptable-show-back" role="button" {{on "click" this.transitionBack}}>
          <span class="btn btn-secondary edit_button" role="button">
            <img class="icon-button encryptable-show-back" src="/assets/images/arrow-left.svg" alt="back">
          </span>
        </a>
      </div>

      <div class="col-auto d-flex justify-content-between align-items-center">
        <DeleteWithConfirmation @class="btn btn-light edit_button" @record={{@encryptable}} @didDelete={{this.refreshRoute}}>
          <img class="icon-button d-inline" src="/assets/images/delete.svg" alt="delete">
        </DeleteWithConfirmation>
      </div>
    </div>

    <div class="row pb-3 justify-content-between">
      <div class="col-lg-9 accountname">
        <h2 class="d-inline">{{t "encryptable/credentials.show.file"}}: {{@encryptable.name}}</h2>
      </div>
      <div class="col-lg-9 accountname text-muted">
        <br><p class="d-inline">{{t "encryptable/credentials.show.transferred_at"}}: {{moment-format @encryptable.createdAt "DD.MM.YYYY hh:mm"}}</p>
      </div>
      <div class="col-lg-9">
        <br><p class="d-inline">{{t "encryptable/transferring/file.show.sender_name"}}: {{@encryptable.sender_name}}</p>
      </div>
    </div>

    {{#if @encryptable.description}}
      <div class="row pb-3">
        <div class="col">
          <br><p class="text-muted description">{{@encryptable.description}}</p>
        </div>
      </div>
    {{/if}}

    <div class="d-flex flex-row justify-content-between mb-2">
      <div>
        <a href={{this.downloadLink}}>
          <BsButton @type="primary">
            {{t "download_file"}}
          </BsButton>
        </a>
      </div>
    </div>
  </div>
{{else}}
  <div class="container px-5 pt-4 h-100 bg-white pl-none encryptable-container-smartphone mb-15">
    <div class="row mb-3">
      <div class="col">
        <a id="encryptable-show-back" role="button" {{on "click" this.transitionBack}}>
          <span class="btn btn-secondary edit_button" role="button">
            <img class="icon-button encryptable-show-back" src="/assets/images/arrow-left.svg" alt="back">
          </span>
        </a>
      </div>
      <div class="col-auto d-flex justify-content-between align-items-center">
        <DeleteWithConfirmation @class="btn btn-light edit_button" @record={{@encryptable}} @didDelete={{this.refreshRoute}}>
          <img class="icon-button d-inline" src="/assets/images/delete.svg" alt="delete">
        </DeleteWithConfirmation>
        <a id="edit_account_button" class="btn btn-secondary edit_button" role="button" {{on "click" this.toggleEncryptableEdit}}>
          <img class="icon-button" src="/assets/images/edit.svg" alt="edit">
        </a>
      </div>
    </div>
    <div class="row pb-3 justify-content-between">
      <div class="col-lg-9 accountname">
        <h2 id="encryptable-title" class="d-inline">{{t "encryptable/credentials.show.title"}}: {{@encryptable.name}}</h2>
      </div>
      <div class="col-lg-9 accountname text-muted">
        <br><p id="encryptable-created-at" class="d-inline">{{t "encryptable/credentials.show.created_at"}}: {{moment-format @encryptable.createdAt "DD.MM.YYYY hh:mm"}}</p>
         /
        <p id="encryptable-updated-at" class="d-inline">{{t "encryptable/credentials.show.last_update"}}: {{moment-format @encryptable.updatedAt "DD.MM.YYYY hh:mm"}}</p>
      </div>
    </div>

    {{#if @encryptable.description}}
      <div class="row pb-3">
        <div class="col">
          <br><p class="text-muted description">{{@encryptable.description}}</p>
        </div>
      </div>
    {{/if}}
    <div class="encryptable-attributes">
      {{#if @encryptable.cleartextUsername}}
        <div class="result-username">
          <div id="encryptable-username-label">{{t "username"}}</div>
          <Input id="cleartext_username" class="d-inline form-control" @disabled="true" @value={{@encryptable.cleartextUsername}}/>
          <CopyButton class="btn btn-light copy-btn" @clipboardText={{@encryptable.cleartextUsername}}
            title={{if @encryptable.isPasswordBlank this.noCopyBlankTooltip ""}}
            @success={{fn this.onCopied "username"}} disabled={{@encryptable.isUsernameBlank}} >
            <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
          </CopyButton>
        </div>
      {{/if}}
      {{#if @encryptable.cleartextEmail}}
        <div class="result-email">
          <div id="encryptable-email-label">{{t "email"}}</div>
          <Input id="cleartext_email" class="d-inline form-control" @disabled="true" @value={{@encryptable.cleartextEmail}}/>
          <CopyButton class="btn btn-light copy-btn" @clipboardText={{@encryptable.cleartextEmail}}
            title={{if @encryptable.isPasswordBlank this.noCopyBlankTooltip ""}}
            @success={{fn this.onCopied "email"}} disabled={{@encryptable.isEmailBlank}} >
            <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
          </CopyButton>
        </div>
      {{/if}}
      {{#if @encryptable.cleartextPassword}}
        <div id="encryptable-password-label">{{t "password"}}</div>
        <div class="hidden-attribute-copy-button">
          {{#if this.isPasswordVisible}}
            <div class="result-hidden-attribute">
              <Input id="cleartext_password" class="d-inline form-control" @disabled="true" @value={{@encryptable.cleartextPassword}}/>
            </div>
          {{else}}
            <a id="show-password" role="button" class="correct-pixel-error-omg show-hidden-attribute-button show-text" {{on "click" (action "showValue" "password")}}>{{t "encryptable/credentials.show.show_password"}}</a>
          {{/if}}
          <CopyButton class="btn btn-light copy-btn" @clipboardText={{@encryptable.cleartextPassword}}
            title={{if @encryptable.isPasswordBlank this.noCopyBlankTooltip ""}}
            @success={{fn this.onCopied "password"}} disabled={{@encryptable.isPasswordBlank}} >
            <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
          </CopyButton>
        </div>
      {{/if}}
      {{#if @encryptable.cleartextPin}}
        <div id="encryptable-pin-label">{{t "pin"}}</div>
        <div class="hidden-attribute-copy-button">
          {{#if this.isPinVisible}}
            <div class="result-hidden-attribute">
              <Input id="cleartext_pin" class="d-inline form-control" @disabled="true" @value={{@encryptable.cleartextPin}}/>
            </div>
          {{else}}
            <a id="show-pin" role="button" class="just-testing correct-pixel-error-omg show-hidden-attribute-button show-text" {{on "click" (action "showValue" "pin")}}>{{t "encryptable/credentials.show.show_pin"}}</a>
          {{/if}}
          <CopyButton class="btn btn-light copy-btn" @clipboardText={{@encryptable.cleartextPin}}
            title={{if @encryptable.isPinBlank this.noCopyBlankTooltip ""}}
            @success={{fn this.onCopied "pin"}} disabled={{@encryptable.isPinBlank}} >
            <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
          </CopyButton>
        </div>
      {{/if}}
      {{#if @encryptable.cleartextToken}}
        <div id="encryptable-token-label">{{t "token"}}</div>
        <div class="hidden-attribute-copy-button">
          {{#if this.isTokenVisible}}
            <div class="result-hidden-attribute">
              <Input id="cleartext_token" class="d-inline form-control" @disabled="true" @value={{@encryptable.cleartextToken}}/>
            </div>
          {{else}}
            <a id="show-token" role="button" class="correct-pixel-error-omg show-hidden-attribute-button show-text" {{on "click" (action "showValue" "token")}}>{{t "encryptable/credentials.show.show_token"}}</a>
          {{/if}}
          <CopyButton class="btn btn-light copy-btn" @clipboardText={{@encryptable.cleartextToken}}
            title={{if @encryptable.isTokenBlank this.noCopyBlankTooltip ""}}
            @success={{fn this.onCopied "token"}} disabled={{@encryptable.isTokenBlank}} >
            <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
          </CopyButton>
        </div>
      {{/if}}
      {{#if @encryptable.cleartextCustomAttr}}
        <div id="encryptable-custom-attr-label">{{@encryptable.cleartextCustomAttr.label}}</div>
        <div class="hidden-attribute-copy-button">
          {{#if this.isCustomAttrVisible}}
            <div class="result-hidden-attribute">
              <Input id="cleartext_custom-attr" class="d-inline form-control" @disabled="true" @value={{@encryptable.cleartextCustomAttr.value}}/>
            </div>
          {{else}}
            <a id="show-custom-attr" role="button" class="correct-pixel-error-omg show-hidden-attribute-button show-text" {{on "click" (action "showValue" "customAttr")}}>{{t "encryptable/credentials.show.show"}} {{@encryptable.cleartextCustomAttr.label}}</a>
          {{/if}}
          <CopyButton class="btn btn-light copy-btn" @clipboardText={{@encryptable.cleartextCustomAttr.value}}
            title={{if @encryptable.isCustomAttrBlank this.noCopyBlankTooltip ""}}
            @success={{fn this.onCopied "customAttr"}} disabled={{@encryptable.isCustomAttrBlank}} >
            <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
          </CopyButton>
        </div>
      {{/if}}
    </div>
    <div class="d-flex flex-row justify-content-between mb-2">
      <div>
        <h3 id="encryptable-attachments">{{t "encryptable/credentials.show.attachments"}}</h3>
      </div>
      <div>
        <BsButton id="encryptable-add-attachment" @type="primary" {{on "click" this.toggleFileNew}}>
          {{t "encryptable/credentials.show.add_attachment"}}
        </BsButton>
      </div>
    </div>
    <table class="table table-striped">
      <tbody>
        <tr>
          <th id="encryptable-file-label">{{t "encryptable/credentials.show.file"}}</th>
          <th id="encryptable-file-description" class="description">{{t "description"}}</th>
          <th id="encryptable-file-actions">{{t "actions"}}</th>
        </tr>
        {{#each @encryptable.encryptableFiles as |encryptableFile|}}
          <EncryptableFile::Row @encryptableFile={{encryptableFile}}/>
        {{/each}}
      </tbody>
    </table>
  </div>
{{/if}}