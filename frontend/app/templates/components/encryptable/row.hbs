{{#if this.isEncryptableEditing}}
  <Encryptable::Form @encryptable={{@encryptable}} @onAbort={{this.toggleEncryptableEdit}}  @title={{t "encryptable/credentials.edit.title"}}/>
{{/if}}
<div id={{concat "loader-encryptable-" @encryptable.id}} {{did-insert this.setupInViewport}}>
</div>
{{#if this.isShown}}
  {{#if this.isFile}}
    <div class="row d-flex align-items-center p-2 bg-grey-2 rounded encryptable-entry">
      <div class="mx-1">
        <img class="icon-medium-button d-inline" src="/assets/images/file.svg" alt="file icon">
      </div>

      <LinkTo class="col-4 underline-hover break-words account-link" @route="encryptables.show" @model={{@encryptable.id}}>
        {{@encryptable.name}}
      </LinkTo>

      <div class="mx-1">
        <img class="icon-medium-button d-inline" src="/assets/images/member.svg" alt="file icon">
        <BsTooltip @title={{t "tooltips.sent_by"}} @delayShow="1000" />
      </div>
      <div class="col-6 d-none d-md-block">
        {{@encryptable.sender_name}} / {{moment-format @encryptable.createdAt "DD.MM.YYYY hh:mm"}}
      </div>

      <div class="col-md-auto d-none d-md-block">
        <a class="mx-1" role="button" href={{this.downloadLink}}>
          <img class="icon-medium-button d-inline" src="/assets/images/file_download.svg" alt="download file">
          <BsTooltip @title={{t "download_file"}} @delayShow="1000" />
        </a>

        <DeleteWithConfirmation @class="mx-1" @record={{@encryptable}} @didDelete={{this.refreshRoute}}>
          <img class="icon-medium-button d-inline" src="/assets/images/delete.svg" alt="delete">
          <BsTooltip @title={{t "encryptable/transferring/file.delete_transferred_encryptables"}} @delayShow="1000" />
        </DeleteWithConfirmation>
      </div>
    </div>
  {{else}}
    <div class="row d-flex align-items-center p-2 bg-grey-2 rounded encryptable-entry">
      <LinkTo class="col-4 underline-hover break-words account-link" @route="encryptables.show" @model={{@encryptable.id}}>
        {{@encryptable.name}}
      </LinkTo>
      {{#unless (gt getAttributesAmount 2)}}
         {{#if @encryptable.usedAttrs.username}}
            <div class="col-2 pr-0 d-none d-md-block">
              <div class="hide-wrapper">
                <Input class="d-inline form-control" id="input-password-{{@encryptable.id}}" @disabled="true" @value={{format-cleartext @encryptable "username"}}/>
                <a role="button"
                   class="show-text show-text-sm bg-light-blue no-wrap overflow-hidden d-flex align-items-center text-muted {{if this.isUsernameVisible "visibility-hidden"}}"
                   {{on "click" (action this.showAttribute "username")}}>
                  {{t "encryptable/credentials.show.show_username"}}
                </a>
              </div>
            </div>
            <div class="col px-0 d-none d-md-block">
              <button class="btn btn-light copy-btn" {{on "click" (action this.copyAttribute "username")}}
                disabled={{@encryptable.isUsernameBlank}} >
                <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
                {{#unless @encryptable.isUsernameBlank}}
                  <BsTooltip @title={{t "encryptable/credentials.show.copy_username"}} @delayShow="500" />
                {{/unless}}
              </button>
            </div>
         {{/if}}
         {{#if @encryptable.usedAttrs.email}}
           <div class="col-2 pr-0 d-none d-md-block">
             <div class="hide-wrapper">
               <Input class="d-inline form-control" id="input-password-{{@encryptable.id}}" @disabled="true" @value={{format-cleartext @encryptable "email"}}/>
               <a role="button"
                  class="show-text show-text-sm bg-light-blue no-wrap overflow-hidden d-flex align-items-center text-muted {{if this.isEmailVisible "visibility-hidden"}}"
                  {{on "click" (action this.showAttribute "email")}}>
                 {{t "encryptable/credentials.show.show_email"}}
               </a>
             </div>
           </div>
           <div class="col px-0 d-none d-md-block">
             <button class="btn btn-light copy-btn" {{on "click" (action this.copyAttribute "email")}}
               disabled={{@encryptable.isEmailBlank}} >
               <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
               {{#unless @encryptable.isEmailBlank}}
                 <BsTooltip @title={{t "encryptable/credentials.show.copy_email"}} @delayShow="500" />
               {{/unless}}
             </button>
           </div>
        {{/if}}
         {{#if @encryptable.usedAttrs.password}}
            <div class="col-2 pr-0 d-none d-md-block">
              <div class="hide-wrapper">
                <Input class="d-inline form-control" @disabled="true" @value={{format-cleartext @encryptable "password"}}/>
                <a role="button" class="show-text show-text-sm bg-light-blue no-wrap overflow-hidden d-flex align-items-center text-muted {{if this.isPasswordVisible "visibility-hidden"}}"{{on "click" (action this.showAttribute "password")}}>{{t "encryptable/credentials.show.show_password"}}</a>
              </div>
            </div>
            <div class="col pl-0 d-none d-md-block">
              <button class="btn btn-light copy-btn" {{on "click" (action this.copyAttribute "password")}}
                disabled={{@encryptable.isPasswordBlank}} >
                <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
                {{#unless @encryptable.isPasswordBlank}}
                  <BsTooltip @title={{t "encryptable/credentials.show.copy_password"}} @delayShow="500" />
                {{/unless}}
              </button>
            </div>
         {{/if}}
         {{#if @encryptable.usedAttrs.token}}
           <div class="col-2 pr-0 d-none d-md-block">
             <div class="hide-wrapper">
               <Input class="d-inline form-control" @disabled="true" @value={{format-cleartext @encryptable "token"}}/>
               <a role="button" class="show-text show-text-sm bg-light-blue no-wrap overflow-hidden d-flex align-items-center text-muted {{if this.isTokenVisible "visibility-hidden"}}"{{on "click" (action this.showAttribute "token")}}>{{t "encryptable/credentials.show.show_token"}}</a>
             </div>
           </div>
           <div class="col pl-0 d-none d-md-block">
             <button class="btn btn-light copy-btn" {{on "click" (action this.copyAttribute "token")}}
               disabled={{@encryptable.isTokenBlank}} >
               <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
               {{#unless @encryptable.isTokenBlank}}
                 <BsTooltip @title={{t "encryptable/credentials.show.copy_token"}} @delayShow="500" />
               {{/unless}}
             </button>
           </div>
         {{/if}}
         {{#if @encryptable.usedAttrs.pin}}
            <div class="col-2 pr-0 d-none d-md-block">
              <div class="hide-wrapper">
                <Input class="d-inline form-control" @disabled="true" @value={{format-cleartext @encryptable "pin"}}/>
                <a role="button" class="show-text show-text-sm bg-light-blue no-wrap overflow-hidden d-flex align-items-center text-muted {{if this.isPinVisible "visibility-hidden"}}"{{on "click" (action this.showAttribute "pin")}}>{{t "encryptable/credentials.show.show_pin"}}</a>
              </div>
            </div>
            <div class="col pl-0 d-none d-md-block">
              <button class="btn btn-light copy-btn" {{on "click" (action this.copyAttribute "pin")}}
                disabled={{@encryptable.isPinBlank}} >
                <img class="icon-clippy img d-inline" src="/assets/images/clipboard.svg" alt="clip">
                {{#unless @encryptable.isPinBlank}}
                  <BsTooltip @title={{t "encryptable/credentials.show.copy_pin"}} @delayShow="500" />
                {{/unless}}
              </button>
            </div>
          {{/if}}
      {{/unless}}

      <div class="col-md-auto d-none d-md-block encryptable-row-icons">
        <DeleteWithConfirmation @class="mx-1" @record={{@encryptable}} @didDelete={{this.refreshRoute}}>
          <img class="icon-medium-button d-inline" src="/assets/images/delete.svg" alt="delete">
          <BsTooltip @title={{t "tooltips.delete_encryptables"}} @delayShow="1000" />
        </DeleteWithConfirmation>
      </div>
    </div>
  {{/if}}
{{/if}}